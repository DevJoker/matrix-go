box: mitsuse/golang
build:
    steps:
        - setup-go-workspace
        - script:
            name: build
            code: |
                go get -t ./...
        - script:
            name: test
            code: |
                go test ./...
        - script:
            name: coverage
            code: |
                bash scripts/coverage/install_tools.bash
                bash scripts/coverage/calculate.bash
                bash <(curl -s https://codecov.io/bash)
    after-steps:
        - wantedly/pretty-slack-notify:
            webhook_url: $SLACK_WEBHOOK_URL
            username: wercker
